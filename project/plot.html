<html>
<head>
<title>Evaluation of Prediction techniques</title>
<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script type="text/javascript" src="http://static.fusioncharts.com/code/latest/fusioncharts.js"></script>
<script type="text/javascript" src="http://static.fusioncharts.com/code/latest/themes/fusioncharts.theme.fint.js?cacheBust=56"></script>
<script type="text/javascript">
  FusionCharts.ready(function(){
  	$.ajax({
  		type: 'GET',
        url: 'http://localhost:8000/evaluate',
        dataType: 'json',
        success: function(data){
        	job = JSON.parse(data);
        	ce = job['crossentropy'];
        	per = job['perplexity'];
        	console.log(ce);
        	console.log(per);
        	crossentropy = {
			        "chart": {
			            "caption": "Evaluation of prediction techniques",
			            "subCaption": "Cross Entropy",
			            "captionFontSize": "14",
			            "subcaptionFontSize": "14",
			            "subcaptionFontBold": "1",
			            "paletteColors": "#0075c2,#1aaf5d",
			            "bgcolor": "#ffffff",
			            "showBorder": "1",
			            "showShadow": "1",
			            "showCanvasBorder": "1",
			            "usePlotGradientColor": "1",
			            "legendBorderAlpha": "1",
			            "legendShadow": "1",
			            "showAxisLines": "1",
			            "showAlternateHGridColor": "1",
			            "divlineThickness": "1",
			            "divLineIsDashed": "1",
			            "divLineDashLen": "1",
			            "divLineGapLen": "1",
			            "xAxisName": "Document",
			            "yAxisName": "Cross Entropy",
			            "showValues": "0"
			        },
			        "categories": [{
			            "category": [{
			                "label": "D1"
			            },{
			                "vline": "true",
			                "lineposition": "0",
			                "color": "#6baa01",
			                "labelHAlign": "center",
			                "labelPosition": "0",
			                "label": "From Domain",
			                "dashed": "1"
			            }, {
			                "label": "D2"
			            }, {
			                "vline": "true",
			                "lineposition": "0",
			                "color": "#6baa01",
			                "labelHAlign": "center",
			                "labelPosition": "0",
			                "label": "From Domain",
			                "dashed": "1"
			            }, {
			                "label": "D3"
			            },{
			                "vline": "true",
			                "lineposition": "0",
			                "color": "#6baa01",
			                "labelHAlign": "center",
			                "labelPosition": "0",
			                "label": "Out of Domain",
			                "dashed": "1"
			            }, {
			                "label": "D4"
			            }, {
			                "vline": "true",
			                "lineposition": "0",
			                "color": "#6baa01",
			                "labelHAlign": "center",
			                "labelPosition": "0",
			                "label": "Out of Domain",
			                "dashed": "1"
			            }]
			        }],
			        "dataset": [{
			            "seriesname": "Additive",
			            "data": [{
			                "value": ce[0][0]
			            }, {
			                "value": ce[0][1]
			            }, {
			                "value": ce[0][2]
			            }, {
			                "value": ce[0][3]
			            }]
			        }, {
			            "seriesname": "Turing",
			            "data": [{
			                "value": ce[1][0]
			            }, {
			                "value": ce[1][1]
			            }, {
			                "value": ce[1][2]
			            }, {
			                "value": ce[1][3]
			            }]
			        }, {
			            "seriesname": "Jelinek Mercer",
			            "data": [{
			                "value": ce[2][0]
			            }, {
			                "value": ce[2][1]
			            }, {
			                "value": ce[2][2]
			            }, {
			                "value": ce[2][3]
			            }]
			        }, {
			            "seriesname": "Witten Bell",
			            "data": [{
			                "value": ce[3][0]
			            }, {
			                "value": ce[3][1]
			            }, {
			                "value": ce[3][2]
			            }, {
			                "value": ce[3][3]
			            }]
			        }, {
			            "seriesname": "Absolute Discounting",
			            "data": [{
			                "value": ce[4][0]
			            }, {
			                "value": ce[4][1]
			            }, {
			                "value": ce[4][2]
			            }, {
			                "value": ce[4][3]
			            }]
			        }]
			    };

	perplexity = {
		        "chart": {
		            "caption": "Evaluation of prediction techniques",
		            "subCaption": "Perplexity",
		            "captionFontSize": "14",
		            "subcaptionFontSize": "14",
		            "subcaptionFontBold": "1",
		            "paletteColors": "#0075c2,#1aaf5d",
		            "bgcolor": "#ffffff",
		            "showBorder": "1",
		            "showShadow": "1",
		            "showCanvasBorder": "1",
		            "usePlotGradientColor": "1",
		            "legendBorderAlpha": "1",
		            "legendShadow": "1",
		            "showAxisLines": "1",
		            "showAlternateHGridColor": "1",
		            "divlineThickness": "1",
		            "divLineIsDashed": "1",
		            "divLineDashLen": "1",
		            "divLineGapLen": "1",
		            "xAxisName": "Document",
		            "yAxisName": "Perplexity",
		            "showValues": "0"
		        },
		        "categories": [{
		            "category": [{
		                "label": "D1"
		            },{
		                "vline": "true",
		                "lineposition": "0",
		                "color": "#6baa01",
		                "labelHAlign": "center",
		                "labelPosition": "0",
		                "label": "From Domain",
		                "dashed": "1"
		            }, {
		                "label": "D2"
		            }, {
		                "vline": "true",
		                "lineposition": "0",
		                "color": "#6baa01",
		                "labelHAlign": "center",
		                "labelPosition": "0",
		                "label": "From Domain",
		                "dashed": "1"
		            }, {
		                "label": "D3"
		            },{
		                "vline": "true",
		                "lineposition": "0",
		                "color": "#6baa01",
		                "labelHAlign": "center",
		                "labelPosition": "0",
		                "label": "Out of Domain",
		                "dashed": "1"
		            }, {
		                "label": "D4"
		            }, {
		                "vline": "true",
		                "lineposition": "0",
		                "color": "#6baa01",
		                "labelHAlign": "center",
		                "labelPosition": "0",
		                "label": "Out of Domain",
		                "dashed": "1"
		            }]
		        }],
		        "dataset": [{
		            "seriesname": "Additive",
		            "data": [{
		                "value": per[0][0]
		            }, {
		                "value": per[0][1]
		            }, {
		                "value": per[0][2]
		            }, {
		                "value": per[0][3]
		            }]
		        }, {
		            "seriesname": "Turing",
		            "data": [{
		                "value": per[1][0]
		            }, {
		                "value": per[1][1]
		            }, {
		                "value": per[1][2]
		            }, {
		                "value": per[1][3]
		            }]
		        }, {
		            "seriesname": "Jelinek Mercer",
		            "data": [{
		                "value": per[2][0]
		            }, {
		                "value": per[2][1]
		            }, {
		                "value": per[2][2]
		            }, {
		                "value": per[2][3]
		            }]
		        }, {
		            "seriesname": "Witten Bell",
		            "data": [{
		                "value": per[3][0]
		            }, {
		                "value": per[3][1]
		            }, {
		                "value": per[3][2]
		            }, {
		                "value": per[3][3]
		            }]
		        }, {
		            "seriesname": "Absolute Discounting",
		            "data": [{
		                "value": per[4][0]
		            }, {
		                "value": per[4][1]
		            }, {
		                "value": per[4][2]
		            }, {
		                "value": per[4][3]
		            }]
		        }]
		    };		    

		    console.log(crossentropy);
		    console.log(perplexity);

			var fusioncharts1 = new FusionCharts({
			    type: 'msline',
			    renderAt: 'first',
			    width: '700',
			    height: '700',
			    dataFormat: 'json',
			    dataSource: crossentropy
			});

		var fusioncharts2 = new FusionCharts({
		    type: 'msline',
		    renderAt: 'second',
		    width: '700',
		    height: '700',
		    dataFormat: 'json',
		    dataSource: perplexity
		});
			fusioncharts1.render();
    		fusioncharts2.render();            
        }
    });   
    
});
</script>
<style>
	#first{
    width: 700px;
    float: left;
    height: 700px;
	}
	#second{
		width: 700px;
		float: right;
		height: 700px;
	}
</style>
</head>
<body>
  <div id="first">Cross Entropy will load here</div>
  <div id="second">Perplexity will load here</div>
</body>
</html>
